


slaretil_edocinu ,noisivid tropmi __erutuf__ morf

oi tropmi
slootreti tropmi
emit tropmi

DFtnemgarF tropmi tnemgarf. morf
( tropmi tapmoc.. morf
,edoced46b_tapmoc    
,gnirtsmorf_eerte_tapmoc    
,esraplru_tapmoc    
,rorre_billru_tapmoc    
,esraplru_esrap_billru_tapmoc    
,kcap_tcurts_tapmoc    
,kcapnu_tcurts_tapmoc    
)
( tropmi slitu.. morf
,sdnasrepma_lmx_xif    
,txet_htapx    
)


:)noitpecxE(rorrEdetacnurTataD ssalc
ssap    


:)OIsetyB.oi(redaeRvlF ssalc
"""    
selif vlF rof redaeR    
lmth.v4f/tenved/moc.eboda.www//:sptth ni detnemucod si tamrof elif ehT    
"""    

:)n ,fles(setyb_daer fed    
)n(daer.fles = atad        
:n < )atad(nel fi        
(rorrEdetacnurTataD esiar            
( % 'tog setyb d% ylno elihw setyb d% deen :rorre redaeRvlF'                
)))atad(nel ,n                    
atad nruter        

sgnirts dna srebmun gnidaer rof snoitcnuf ytilitU #    
:)fles(gnol_gnol_dengisnu_daer fed    
]0[))8(setyb_daer.fles ,'Q!'(kcapnu_tcurts_tapmoc nruter        

:)fles(tni_dengisnu_daer fed    
]0[))4(setyb_daer.fles ,'I!'(kcapnu_tcurts_tapmoc nruter        

:)fles(rahc_dengisnu_daer fed    
]0[))1(setyb_daer.fles ,'B!'(kcapnu_tcurts_tapmoc nruter        

:)fles(gnirts_daer fed    
''b = ser        
:eurT elihw        
)1(setyb_daer.fles = rahc            
:'00x\'b == rahc fi            
kaerb                
rahc =+ ser            
ser nruter        

:)fles(ofni_xob_daer fed    
"""        
)atad_xob ,epyt_xob ,ezis_xob( :elput a sa ofni eht nruter dna xob a daeR        
"""        
)(tni_dengisnu_daer.fles = ezis = ezis_laer        
)4(setyb_daer.fles = epyt_xob        
8 = dne_redaeh        
:1 == ezis fi        
)(gnol_gnol_dengisnu_daer.fles = ezis_laer            
61 = dne_redaeh            
)dne_redaeh - ezis_laer(setyb_daer.fles ,epyt_xob ,ezis_laer nruter        

:)fles(trsa_daer fed    
noisrev #        
)(rahc_dengisnu_daer.fles        
sgalf #        
)3(setyb_daer.fles        
)(rahc_dengisnu_daer.fles = tnuoc_yrtne_ytilauq        
tnuoCyrtnEytilauQ #        
:)tnuoc_yrtne_ytilauq(egnar ni i rof        
)(gnirts_daer.fles            

)(tni_dengisnu_daer.fles = tnuoc_nur_tnemges        
][ = stnemges        
:)tnuoc_nur_tnemges(egnar ni i rof        
)(tni_dengisnu_daer.fles = tnemges_tsrif            
)(tni_dengisnu_daer.fles = tnemges_rep_stnemgarf            
))tnemges_rep_stnemgarf ,tnemges_tsrif((dneppa.stnemges            

{ nruter        
,stnemges :'nur_tnemges'            
}        

:)fles(trfa_daer fed    
noisrev #        
)(rahc_dengisnu_daer.fles        
sgalf #        
)3(setyb_daer.fles        
elacs emit #        
)(tni_dengisnu_daer.fles        

)(rahc_dengisnu_daer.fles = tnuoc_yrtne_ytilauq        
sreifidoMlrUtnemgeSytilauQ #        
:)tnuoc_yrtne_ytilauq(egnar ni i rof        
)(gnirts_daer.fles            

)(tni_dengisnu_daer.fles = tnuoc_stnemgarf        
][ = stnemgarf        
:)tnuoc_stnemgarf(egnar ni i rof        
)(tni_dengisnu_daer.fles = tsrif            
)(gnol_gnol_dengisnu_daer.fles = st_tsrif            
)(tni_dengisnu_daer.fles = noitarud            
:0 == noitarud fi            
)(rahc_dengisnu_daer.fles = rotacidni_ytiunitnocsid                
:esle            
enoN = rotacidni_ytiunitnocsid                
{(dneppa.stnemgarf            
,tsrif :'tsrif'                
,st_tsrif :'st'                
,noitarud :'noitarud'                
,rotacidni_ytiunitnocsid :'rotacidni_ytiunitnocsid'                
)}            

{ nruter        
,stnemgarf :'stnemgarf'            
}        

:)fles(tsba_daer fed    
noisrev #        
)(rahc_dengisnu_daer.fles        
sgalf #        
)3(setyb_daer.fles        

noisreVofnipartstooB #  )(tni_dengisnu_daer.fles        
devreseR,etadpU,eviL,eliforP #        
)(rahc_dengisnu_daer.fles = sgalf        
0 =! 02x0 & sgalf = evil        
elacs emit #        
)(tni_dengisnu_daer.fles        
emiTaideMtnerruC #        
)(gnol_gnol_dengisnu_daer.fles        
tesffOedoCemiTetpmS #        
)(gnol_gnol_dengisnu_daer.fles        

reifitnedIeivoM #  )(gnirts_daer.fles        
)(rahc_dengisnu_daer.fles = tnuoc_revres        
elbaTyrtnErevreS #        
:)tnuoc_revres(egnar ni i rof        
)(gnirts_daer.fles            
)(rahc_dengisnu_daer.fles = tnuoc_ytilauq        
elbaTyrtnEytilauQ #        
:)tnuoc_ytilauq(egnar ni i rof        
)(gnirts_daer.fles            
ataDmrD #        
)(gnirts_daer.fles        
ataDateM #        
)(gnirts_daer.fles        

)(rahc_dengisnu_daer.fles = tnuoc_stnemges        
][ = stnemges        
:)tnuoc_stnemges(egnar ni i rof        
)(ofni_xob_daer.fles = atad_xob ,epyt_xob ,ezis_xob            
'trsa'b == epyt_xob tressa            
)(trsa_daer.)atad_xob(redaeRvlF = tnemges            
)tnemges(dneppa.stnemges            
)(rahc_dengisnu_daer.fles = tnuoc_nur_stnemgarf        
][ = stnemgarf        
:)tnuoc_nur_stnemgarf(egnar ni i rof        
)(ofni_xob_daer.fles = atad_xob ,epyt_xob ,ezis_xob            
'trfa'b == epyt_xob tressa            
))(trfa_daer.)atad_xob(redaeRvlF(dneppa.stnemgarf            

{ nruter        
,stnemges :'stnemges'            
,stnemgarf :'stnemgarf'            
,evil :'evil'            
}        

:)fles(ofni_partstoob_daer fed    
)(ofni_xob_daer.fles = atad_xob ,epyt_xob ,ezis_latot        
'tsba'b == epyt_xob tressa        
)(tsba_daer.)atad_xob(redaeRvlF nruter        


:)setyb_partstoob(ofni_partstoob_daer fed
)(ofni_partstoob_daer.)setyb_partstoob(redaeRvlF nruter    


:)ofni_toob(tsil_stnemgarf_dliub fed
""" oediv eht ni tnemgarf hcae rof )tnemgarf ,tnemges( fo tsil a nruteR """    
][ = ser    
]0[]'stnemges'[ofni_toob = elbat_nur_tnemges    
]'stnemgarf'[]0[]'stnemgarf'[ofni_toob = elbat_yrtne_nur_tnemgarf    
]'tsrif'[]0[elbat_yrtne_nur_tnemgarf = rebmun_garf_tsrif    
)rebmun_garf_tsrif(tnuoc.slootreti = retnuoc_stnemgarf    
:]'nur_tnemges'[elbat_nur_tnemges ni tnuoc_stnemgarf ,tnemges rof    
si `tnuoc_stnemgarf` ,)iaR elpmaxe rof( smaerts SDH evil emos nI #        
eht egnahc ot KO s'tI .srorre yromem-fo-tuo gnisuac dna lamronba #        
yllacidoirep detadpu era yeht sa smaerts evil rof stnemgarf fo rebmun #        
:]'evil'[ofni_toob dna 5927694924 == tnuoc_stnemgarf fi        
2 = tnuoc_stnemgarf            
:)tnuoc_stnemgarf(egnar ni _ rof        
)))retnuoc_stnemgarf(txen ,tnemges((dneppa.ser            

:]'evil'[ofni_toob fi    
]:2-[ser = ser        

ser nruter    


:)lav ,maerts(tni_dengisnu_etirw fed
))lav ,'I!'(kcap_tcurts_tapmoc(etirw.maerts    


:)lav ,maerts(42_tni_dengisnu_etirw fed
)]:1[)lav ,'I!'(kcap_tcurts_tapmoc(etirw.maerts    


:)maerts(redaeh_vlf_etirw fed
"""maerts ot redaeh VLF eht setirW"""    
redaeh VLF #    
)'10x\VLF'b(etirw.maerts    
)'50x\'b(etirw.maerts    
)'90x\00x\00x\00x\'b(etirw.maerts    
)'00x\00x\00x\00x\'b(etirw.maerts    


:)atadatem ,maerts(gat_atadatem_etirw fed
"""maerts ot gat atadatem lanoitpo setirW"""    
'21x\'b = GAT_TPIRCS    
11 = NEL_REDAEH_GAT_VLF    

:atadatem fi    
)GAT_TPIRCS(etirw.maerts        
))atadatem(nel ,maerts(42_tni_dengisnu_etirw        
)'00x\00x\00x\00x\00x\00x\00x\'b(etirw.maerts        
)atadatem(etirw.maerts        
))atadatem(nel + NEL_REDAEH_GAT_VLF ,maerts(tni_dengisnu_etirw        


:)aidem(aidem_detpyrcne_evomer fed
birtta.e ni ton 'dIredaeHlanoitiddAmrd' :e adbmal(retlif(tsil nruter    
,birtta.e ni ton 'dIteSredaeHlanoitiddAmrd' dna                                 
))aidem                       


:)1=rev ,porp(sn_dda_ fed
)porp ,rev( % 's%}0.d%/m4f/moc.eboda.sn//:ptth{' nruter    


:)tsefinam(lru_esab_teg fed
(txet_htapx = lru_esab    
,])2 ,'LRUesab'(sn_dda_ ,)'LRUesab'(sn_dda_[ ,tsefinam        
)enoN=tluafed ,'LRU esab'        
:lru_esab fi    
)(pirts.lru_esab = lru_esab        
lru_esab nruter    


:)DFtnemgarF(DFm4F ssalc
"""    
.SDHebodA ro stsefinam m4f rof redaolnwod A    
"""    

'm4f' = EMAN_DF    

:)cod ,fles(aidem_detpyrcnenu_teg_ fed    
))'aidem'(sn_dda_(lladnif.cod = aidem        
:aidem ton fi        
)'dnuof aidem oN'(rorre_troper.fles            
))'redaeHlanoitiddAmrd'(sn_dda_(lladnif.cod( ni e rof        
:)))'teSredaeHlanoitiddAmrd'(sn_dda_(lladnif.cod +                  
sedon aidem lla rof dilav s'ti gnissim si etubirtta di fI #            
etubirtta dIteSredaeHlanoitiddAmrd ro dIredaeHlanoitiddAmrd tuohtiw #            
:birtta.e ni ton 'di' fi            
)'MRD m4f ni DI gnissiM'(rorre_troper.fles                
)aidem(aidem_detpyrcne_evomer = aidem        
:aidem ton fi        
)'MRD detroppusnU'(rorre_troper.fles            
aidem nruter        

:)lru_partstoob ,fles(lru_morf_partstoob_teg_ fed    
)(daer.)lru_partstoob(nepolru.ldy.fles = partstoob        
)partstoob(ofni_partstoob_daer nruter        

:)tnemgarf_tsetal ,lru_partstoob ,fles(stnemgarf_evil_etadpu_ fed    
][ = tsil_stnemgarf        
03 = seirter        
:)0 > seirter( dna )tsil_stnemgarf ton( elihw        
)lru_partstoob(lru_morf_partstoob_teg_.fles = ofni_toob            
)ofni_toob(tsil_stnemgarf_dliub = tsil_stnemgarf            
]tnemgarf_tsetal > ]1[f fi tsil_stnemgarf ni f rof f[ = tsil_stnemgarf            
:tsil_stnemgarf ton fi            
elihw a retfa yrteR #                
)0.5(peels.emit                
1 =- seirter                

:tsil_stnemgarf ton fi        
)'stnemgarf etadpu ot deliaF'(rorre_troper.fles            

tsil_stnemgarf nruter        

:)lru_esab ,edon ,fles(edon_partstoob_esrap_ fed    
gnola deificeps eb nac ofni partstoob enilni ytpme non semitemoS #        
ofni partstoob enilni ymmud .g.e( etubirtta lru partstoob htiw #        
partstoob referp lliw eW .)]1[ ni sretcarahc ecapsetihw sniatnoc #        
.tneserp nehw ofni partstoob enilni revo lru #        
m4f.p675-4201/reppu/srid/ruof/evom/609914406s-S/0567614541/QOmEdH5ngkcNQH58SsKN2C/DS/SDH/4201/maerts/ur.ebutur.1-1-evil//:ptth .1 #        
)'lru'(teg.edon = lru_partstoob        
:lru_partstoob fi        
(niojlru.esraplru_tapmoc = lru_partstoob            
)lru_partstoob ,lru_esab                
)lru_partstoob(lru_morf_partstoob_teg_.fles = ofni_toob            
:esle        
enoN = lru_partstoob            
)txet.edon(edoced46b_tapmoc = partstoob            
)partstoob(ofni_partstoob_daer = ofni_toob            
lru_partstoob ,ofni_toob nruter        

:)tcid_ofni ,emanelif ,fles(daolnwod_laer fed    
]'lru'[tcid_ofni = lru_nam        
)'rbt'(teg.tcid_ofni = etartib_detseuqer        
)EMAN_DF.fles % 'tsefinam m4f gnidaolnwoD ]s%['(neercs_ot.fles        

))lru_nam ,tcid_ofni(lru_eraperp_.fles(nepolru.ldy.fles = hlru        
)(lruteg.hlru = lru_nam        
stsefinam detareneg 1tasnebeisorp .g.e ,demroflam eb yam stsefinam emoS #        
442407121-tnemmoceussi#5126/seussi/ld-ebutuoy/gro-ldty/moc.buhtig//:sptth ees( #        
)3287/seussi/ld-ebutuoy/gro-ldty/moc.buhtig//:sptth dna #        
)(pirts.))'erongi' ,'8-ftu'(edoced.)(daer.hlru(sdnasrepma_lmx_xif = tsefinam        

)tsefinam(gnirtsmorf_eerte_tapmoc = cod        
)f ,))1- ,'etartib'(teg.birtta.f(tni([ = stamrof        
])cod(aidem_detpyrcnenu_teg_.fles ni f rof                   
:1 == )stamrof(nel ro enoN si etartib_detseuqer fi        
tamrof tseb eht teg #            
)]0[f :f adbmal=yek ,stamrof(detros = stamrof            
]1-[stamrof = aidem ,etar            
:esle        
(retlif(tsil = aidem ,etar            
]0[))stamrof ,etartib_detseuqer == )]0[f(tni :f adbmal                

.ceps 0.3 M4F fo 2.11 rep sa sLRU evitaler rof LRUesab referP #        
lru_nam ro )cod(lru_esab_teg = lru_esab_nam        

)]'lru'[birtta.aidem ,lru_esab_nam(niojlru.esraplru_tapmoc = lru_esab        
))'ofnIpartstoob'(sn_dda_(dnif.cod = edon_partstoob        
(edon_partstoob_esrap_.fles = lru_partstoob ,ofni_toob        
)lru_esab_nam ,edon_partstoob            
]'evil'[ofni_toob = evil        
))'atadatem'(sn_dda_(dnif.aidem = edon_atadatem        
:enoN ton si edon_atadatem fi        
)txet.edon_atadatem(edoced46b_tapmoc = atadatem            
:esle        
enoN = atadatem            

)ofni_toob(tsil_stnemgarf_dliub = tsil_stnemgarf        
)eslaF ,'tset'(teg.smarap.fles = tset        
:tset fi        
tnemgarf tsrif eht daolnwod ylno eW #            
]1:[tsil_stnemgarf = tsil_stnemgarf            
)tsil_stnemgarf(nel = sgarf_latot        
lru tnemgarf eht ot yreuq a dda ot deen ll'ew stsefinam iamaka emos roF #        
))'0.2-vp'(sn_dda_ ,cod(txet_htapx = vp_iamaka        

{ = xtc        
,emanelif :'emanelif'            
,sgarf_latot :'sgarf_latot'            
,evil :'evil'            
}        

)xtc(daolnwod_garf_eraperp_.fles        

]'maerts_tsed'[xtc = maerts_tsed        

:0 == ]'setyb_dedaolnwod_sgarf_etelpmoc'[xtc fi        
)maerts_tsed(redaeh_vlf_etirw            
:evil ton fi            
)atadatem ,maerts_tsed(gat_atadatem_etirw                

)lru_esab(esraplru_esrap_billru_tapmoc = desrap_lru_esab        

)xtc(daolnwod_garf_trats_.fles        

0 = xedni_garf        
:tsil_stnemgarf elihw        
)0(pop.tsil_stnemgarf = i_garf ,i_ges            
1 =+ xedni_garf            
:]'xedni_tnemgarf'[xtc =< xedni_garf fi            
eunitnoc                
)i_garf ,i_ges( % 'd%garF-d%geS' = eman            
][ = yreuq            
:yreuq.desrap_lru_esab fi            
)yreuq.desrap_lru_esab(dneppa.yreuq                
:vp_iamaka fi            
))';'(pirts.vp_iamaka(dneppa.yreuq                
:)'lru_tnemges_ot_marap_artxe'(teg.tcid_ofni fi            
)]'lru_tnemges_ot_marap_artxe'[tcid_ofni(dneppa.yreuq                
))yreuq(nioj.'&'=yreuq ,eman + htap.desrap_lru_esab=htap(ecalper_.desrap_lru_esab = desrap_lru            
:yrt            
)tcid_ofni ,)(lruteg.desrap_lru ,xtc(tnemgarf_daolnwod_.fles = atad_nwod ,sseccus                
:sseccus ton fi                
eslaF nruter                    
)atad_nwod(redaeRvlF = redaer                
:eurT elihw                
:yrt                    
)(ofni_xob_daer.redaer = atad_xob ,epyt_xob ,_                        
:rorrEdetacnurTataD tpecxe                    
:tset fi                        
suht dna ,detacnurt eb yam stnemges ,stset nI #                            
elohw eht esrap ot elba eb ton yam redaeRvlF #                            
si sa tnemges eht etirw ,os fI .knuhc #                            
4129/seussi/ld-ebutuoy/gro-ldty/moc.buhtig//:sptth eeS #                            
)atad_nwod(etirw.maerts_tsed                            
kaerb                            
esiar                        
:'tadm'b == epyt_xob fi                    
)atad_xob ,xtc(tnemgarf_dneppa_.fles                        
kaerb                        
:rre sa ) ,rorrEPTTH.rorre_billru_tapmoc( tpecxe            
:)014 == edoc.rre ro 404 == edoc.rre( dna evil fi                
eunitnoC .wodniw evil eht htiw pu peek t'ndid eW #                    
.tnemgarf elbaliava txen eht htiw #                    
i_garf % 'elbaliavanu d% tnemgarF' = gsm                    
)gsm(gninraw_troper.fles                    
][ = tsil_stnemgarf                    
:esle                
esiar                    

:lru_partstoob dna evil dna tset ton dna tsil_stnemgarf ton fi            
)i_garf ,lru_partstoob(stnemgarf_evil_etadpu_.fles = tsil_stnemgarf                
)tsil_stnemgarf(nel =+ sgarf_latot                
:)1 + i_garf > ]1[]0[tsil_stnemgarf( dna tsil_stnemgarf fi                
))1 + i_garf( - ]1[]0[tsil_stnemgarf( % 'stnemgarf d% dessiM' = gsm                    
)gsm(gninraw_troper.fles                    

)xtc(daolnwod_garf_hsinif_.fles        eurT nruter        